<ion-view cache-view="false" title="我的医生" show-tabs>
    <ion-nav-buttons side="left">
        <button class='button button-clear' ng-click="scanbarcode()"><i class='icon ion-qr-scanner font-white'></i></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right" >
        <button class="button button-clear" ng-click="GoToMessage() " head-red-point='HasUnreadMessages'><i class="icon iconfont icon-lingdang"></i></button>
    </ion-nav-buttons>
    
     <div class="bar bar-header" style="position:absolute;top:32px; border: none;">  
        <button style="margin-top:10px" class="doctorBtn" ng-click ="allDoctors()" >
            更多医生
        </button>

         <button style="margin-top:10px" class="doctorBtn" ng-click ="consultRecord()">
            咨询记录
        </button>  
    </div>


  <!-- <div  style="position: absolute;top: 43px;z-index:100;display: block;height: 2.5px;background-color: #33cd5f;{{barwidth}}" ></div> -->
  <ion-content padding="true" style="position:absolute;top:65px;">

    <div class="card" style="margin-top: 10px">

        <div class="item item-divider">
            我的主管医生
        </div>

        <div  class="card" ng-if="hasDoctor" style="margin:0">

            <div class="item item-thumbnail-left" ng-click="getDoctorDetail(doctor.userId)"> 
                <img style="border-radius: 100%;top: 40%;margin-top: -40px" ng-src="{{doctor.photoUrl  || 'img/DefaultAvatar.jpg'}}">
                <span>{{doctor.name}}</span>
                <span style="float: right">{{doctor.department}}</span>
                <p>医院：{{doctor.workUnit}}</p>
                <p style="font-size: 12px">职称:{{doctor.title}}</p>
                <p style="font-size: 12px">收费：<span>咨询{{doctor.charge1}}元</span><span style="margin-left: 20px">问诊{{doctor.charge2}}元</span></p>
                <div class="row row-below-avatar" style="font-size: 14px;color:#2B67F5;">
                    <span class="col font-c"><i class="icon ion-star"></i>{{doctor.score.toFixed(2)||"无"}}</span>
                    <span class="col font-c">咨询量：{{doctor.count1}}</span>
                    <span class="col font-c">问诊量：{{doctor.count2}}</span>
                </div>
            </div>

            <div class="row">
                <button ng-disabled="DisabledConsult"  ng-click="question(doctor.userId,doctor.name,doctor.charge1)" class="doctorBtn"><i class="icon iconfont icon-zixun2"></i>咨询</button>
                <button ng-disabled="DisabledConsult" ng-click="consult(doctor.userId,doctor.name,doctor.charge1,doctor.charge2)" class="doctorBtn"><i class="icon iconfont icon-baojifuben"></i>问诊</button>
            </div>
            <div class="row">
                <button ng-disabled="DisabledConsult" class="doctorBtn"><i class="icon ion-speakerphone"></i>加急咨询</button>
                <button ng-disabled="DisabledConsult" class="doctorBtn"><i class="icon ion-person-stalker"></i>面诊</button>
            </div>
            <div class="row">
                <button  ng-if="!doctor.IsMyFollowDoctor" ng-disabled="DisabledConsult" ng-click="followDoctor(doctor.userId)" class="doctorBtn"><i class="icon ion-ios-heart-outline"></i>关注医生</button>
                <button  ng-if="doctor.IsMyFollowDoctor" ng-disabled="DisabledConsult" ng-click="unfollowDoctor(doctor.userId)" class="doctorBtn2"><i class="icon ion-ios-heart"></i>已关注医生</button>
                <button ng-disabled="DisabledConsult" class="doctorBtn2" ng-click="cancelMyDoc()"><i class="icon ion-person-add"></i>已成为主管医生</button>

            </div>
        </div>

        <div id="message" ng-if="!hasDoctor" style="line-height: 30px;text-align: center;">
            <!-- <div class="item item-text-wrap"> -->
               <!-- 你目前还没有主管医生！-->
            <!-- </div> -->
        </div>
    </div>

    


    
    <div class="card">

      <div class="item item-divider">
          我关注的医生
      </div>
   
   
      <div  class="card" ng-if="hasfollowdoctors" ng-repeat="followdoctor in followdoctors" style="margin-top: 0px">

        <div class="item item-thumbnail-left" ng-click="getDoctorDetail(followdoctor.doctorId.userId)"> 
            <img style="border-radius: 100%;top: 40%;margin-top: -40px" ng-src="{{followdoctor.doctorId.photoUrl  || 'img/DefaultAvatar.jpg'}}">
            <span>{{followdoctor.doctorId.name}}</span>
            <span style="float: right">{{followdoctor.doctorId.department}}</span>
            <p>{{followdoctor.doctorId.workUnit}}</p>
            <p style="font-size: 12px">职称:{{followdoctor.doctorId.title}}</p>
            <p style="font-size: 12px">收费：<span>咨询{{followdoctor.doctorId.charge1}}元</span><span style="margin-left: 20px">问诊{{followdoctor.doctorId.charge2}}元</span></p>
            <div class="row row-below-avatar" style="font-size: 14px;color:#2B67F5;">
                <span class="col font-c">
                    <i class="icon ion-star"></i>{{followdoctor.doctorId.score.toFixed(2)||"无"}}
                </span>
                <span class="col font-c">咨询量：{{followdoctor.doctorId.count1}}</span>
                <span class="col font-c">问诊量：{{followdoctor.doctorId.count2}}</span>
            </div>
        </div>

        <div class="row">
            <button ng-disabled="DisabledConsult"   ng-click="question(followdoctor.doctorId.userId, followdoctor.doctorId.name, followdoctor.doctorId.charge1)" class="doctorBtn"><i class="icon iconfont icon-zixun2"></i>咨询</button>
            <button ng-disabled="DisabledConsult" ng-click="consult(followdoctor.doctorId.userId, followdoctor.doctorId.name, followdoctor.doctorId.charge1, followdoctor.doctorId.charge2)" class="doctorBtn"><i class="icon iconfont icon-baojifuben"></i>问诊</button>
        </div>
        <div class="row">
            <button ng-disabled="DisabledConsult" class="doctorBtn">
                <i class="icon ion-speakerphone"></i>加急咨询
            </button>
            <button ng-disabled="DisabledConsult" class="doctorBtn">
                <i class="icon ion-person-stalker"></i>面诊
            </button>
        </div>
        <div class="row">
            <button ng-click="unfollowDoctor(followdoctor.doctorId.userId)" class="doctorBtn2">
                <i class="icon ion-ios-heart"></i>已关注医生
            </button>

            <!-- 判断该关注医生是否同时为主管医生 -->
            <button ng-disabled="DisabledConsult" ng-if="doctor.userId!=followdoctor.doctorId.userId" ng-click="applyMyDoctor(followdoctor.doctorId)" class="doctorBtn">
                <i class="icon ion-person-add"></i>申请为主管医生
            </button>

            <button ng-disabled="DisabledConsult"  ng-if="doctor.userId==followdoctor.doctorId.userId" ng-click="cancelMyDoc()" class="doctorBtn2">
                <i class="icon ion-person-add"></i>已成为主管医生
            </button>
        </div>
      </div>
      <ion-infinite-scroll ng-if="followmoredata&&hasfollowdoctors" on-infinite="myFollowdoc()" distance="1%"></ion-infinite-scroll>

      <div ng-if="!hasfollowdoctors" style="line-height: 30px;text-align: center;">
              <!-- <div class="item item-text-wrap"> -->
                  你目前还没有关注医生！
              <!-- </div> -->
      </div> 
    </div>
    
             
  </ion-content>
          
</ion-view>